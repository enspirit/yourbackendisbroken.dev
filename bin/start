#!/bin/bash

git checkout step-1
clear
cat .tutorial/banner.txt

echo "Waiting for API to start..."
timeout 10 bash -c 'until printf "" 2>>/dev/null >>/dev/tcp/$0/$1; do sleep 1; done' localhost 3000

if [ $? -gt 0 ]; then
  echo "API unreachable ..."
  exit
fi

clear
cat .tutorial/banner.txt

cat <<-EOF
Welcome to this tutorial!

We have tried to make it easy for you to browse this git,
the following commands are available for you:

- bin/next: moves to the next step of this tutorial
- bin/previous: moves to the previous step

The API is running on http://localhost:3000
EOF

if [ -z "$GITPOD_REPO_ROOT" ]; then
  cat <<-EOF

You are now ready for "Step 1", open http://localhost:8080 in your browser.
EOF
fi

echo ""
